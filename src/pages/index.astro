---
import BaseLayout from "../layouts/BaseLayout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("posts");
const sortedPosts = posts.sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);
---

<BaseLayout>
  <Header />

  <main>
    <p class="description">
      I'm a software developer writing about programming, machine learning, and
      everything in between.
    </p>

    <p class="description">Some of my writing includes:</p>

    <nav>
      <ul class="post-list">
        {
          sortedPosts.map((post) => (
            <li>
              <a href={`/${post.slug}`} title={post.data.description}>
                {post.data.title}
              </a>
            </li>
          ))
        }
      </ul>
    </nav>
  </main>

  <Footer />
</BaseLayout>
